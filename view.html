<!DOCTYPE html>
<html lang="vi">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>Bạn Có Một Tấm Thiệp Mới - ThiepOnline</title>
  <meta name="description"
    content="Nhấn để mở tấm thiệp đặc biệt dành riêng cho bạn. Trải nghiệm khoảnh khắc đầy cảm xúc.">

  <!-- Open Graph -->
  <meta property="og:title" content="Bạn Có Một Tấm Thiệp Mới - ThiepOnline">
  <meta property="og:description" content="Nhấn để mở tấm thiệp đặc biệt dành riêng cho bạn.">
  <meta property="og:type" content="article">
  <meta property="og:url" content="https://thieponline.surge.sh/view.html">
  <meta property="og:image"
    content="https://res.cloudinary.com/dkeupjars/image/upload/v1765819118/other_project/thieponline-banner-02_mii6ax.png">
  <link rel="canonical" href="https://thieponline.surge.sh/view.html">

  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link
    href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Lora:ital,wght@0,400;0,500;0,600;0,700;1,400&family=Dancing+Script:wght@700&family=Pacifico&family=Great+Vibes&family=Patrick+Hand&family=Playfair+Display:ital,wght@0,400;0,700;1,400&family=Merriweather:ital,wght@0,300;0,400;0,700;1,300&family=Montserrat:wght@300;400;500;600;700&family=Nunito:wght@300;400;600;700&display=swap"
    rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          fontFamily: {
            sans: ['Inter', 'sans-serif'],
            serif: ['Lora', 'serif'],
            hand: ['"Dancing Script"', 'cursive'],
          }, colors: {
            background: '#1F1B24',
            surface: '#2D2833',
            primary: '#F472B6',
          },
          animation: {
            'open-envelope': 'openEnvelope 1s forwards ease-in-out',
            'card-up': 'cardUp 1.2s forwards 0.3s cubic-bezier(0.34, 1.56, 0.64, 1)',
            'float': 'float 8s ease-in-out infinite',
          },
          keyframes: {
            openEnvelope: {
              '0%': { transform: 'scale(1)' },
              '100%': { transform: 'scale(1.1) translateY(20px)', opacity: '0' }
            },
            cardUp: {
              '0%': { transform: 'translateY(100px) scale(0.9)', opacity: '0' },
              '100%': { transform: 'translateY(0) scale(1)', opacity: '1' }
            },
            float: {
              '0%, 100%': { transform: 'translateY(0)' },
              '50%': { transform: 'translateY(-15px)' },
            }
          }
        }
      }
    }
  </script>
  <style>
    .envelope-paper {
      background-color: #2D2833;
      background-image: url("data:image/svg+xml,%3Csvg width='20' height='20' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='%23F472B6' fill-opacity='0.05' fill-rule='evenodd'%3E%3Ccircle cx='3' cy='3' r='3'/%3E%3Ccircle cx='13' cy='13' r='3'/%3E%3C/g%3E%3C/svg%3E");
    }

    .wax-seal {
      background: linear-gradient(135deg, #F472B6 0%, #BE185D 100%);
      box-shadow: 0 4px 10px rgba(190, 24, 93, 0.4);
    }

    /* Hide scrollbar for seamless look */
    ::-webkit-scrollbar {
      display: none;
    }
  </style>

  <script>(function (w, d, s, l, i) {
        w[l] = w[l] || []; w[l].push({
          'gtm.start':
            new Date().getTime(), event: 'gtm.js'
        }); var f = d.getElementsByTagName(s)[0],
          j = d.createElement(s), dl = l != 'dataLayer' ? '&l=' + l : ''; j.async = true; j.src =
            'https://www.googletagmanager.com/gtm.js?id=' + i + dl; f.parentNode.insertBefore(j, f);
      })(window, document, 'script', 'dataLayer', 'GTM-P2W79B6T');</script>
</head>

<body class="bg-[#1F1B24] h-[100dvh] w-full overflow-hidden flex items-center justify-center text-white relative">

  <script>
    // Add global unlock listeners immediately
    document.addEventListener('click', () => MusicController.unlockAndPlay(), { once: true });
    document.addEventListener('touchstart', () => MusicController.unlockAndPlay(), { once: true });
  </script>

  <!-- Envelope / Start Screen -->
  <div id="envelope"
    class="absolute inset-0 z-50 flex flex-col items-center justify-center bg-[conic-gradient(at_top,_var(--tw-gradient-stops))] from-slate-900 via-[#2D2833] to-slate-900 cursor-pointer transition duration-1000 p-4">
    <div
      class="relative w-full max-w-xs sm:w-80 h-48 sm:h-56 bg-gradient-to-br from-[#2a2630] to-[#1a1720] rounded-lg shadow-[0_20px_50px_rgba(0,0,0,0.5)] flex items-center justify-center transform transition duration-500 hover:scale-105 envelope-paper border border-white/5 group">
      <!-- Flap (SVG) -->
      <svg
        class="absolute -top-12 sm:-top-14 left-0 w-full h-12 sm:h-14 z-10 filter drop-shadow-xl pointer-events-none origin-bottom transition duration-700 group-hover:rotate-x-180"
        viewBox="0 0 100 100" preserveAspectRatio="none">
        <path d="M0,100 L50,0 L100,100 Z" fill="#322d39" />
      </svg>

      <!-- Seal -->
      <div
        class="absolute -top-3 sm:-top-4 w-12 h-12 sm:w-14 sm:h-14 rounded-full wax-seal flex items-center justify-center z-20 border-2 border-[#BE185D]/50 shadow-[0_0_20px_rgba(190,24,93,0.6)] animate-pulse group-hover:animate-none group-hover:scale-110 transition">
        <span class="font-serif text-white font-bold text-lg sm:text-xl drop-shadow-md">❤</span>
      </div>

      <!-- Hint Icon inside -->
      <div class="text-4xl animate-bounce mt-12 opacity-0 group-hover:opacity-100 transition duration-700 delay-100">✨
      </div>
    </div>

    <div class="mt-12 text-center pointer-events-none">
      <p class="text-sm sm:text-base font-serif italic text-gray-400 mb-2">Bạn có một tin nhắn mới</p>
      <p
        class="text-xl sm:text-2xl font-bold tracking-widest uppercase text-white animate-pulse drop-shadow-[0_0_10px_rgba(255,255,255,0.3)]">
        Mở Thiệp Ngay
      </p>
    </div>
  </div>

  <!-- Main Card Container -->
  <div id="card-container"
    class="opacity-0 transform scale-95 transition duration-1000 relative w-full h-full flex flex-col items-center justify-center">

    <!-- Background Decoration -->
    <div class="absolute inset-0 z-0 overflow-hidden pointer-events-none" id="view-bg">
      <div
        class="absolute top-0 left-0 w-full h-1/2 bg-gradient-to-b from-primary/10 to-transparent mix-blend-screen filter blur-[100px] animate-float">
      </div>
      <div
        class="absolute bottom-0 right-0 w-full h-1/2 bg-gradient-to-t from-rose-600/10 to-transparent mix-blend-screen filter blur-[100px] animate-float"
        style="animation-delay: 2s"></div>
    </div>

    <!-- The Card Wrapper -->
    <div
      class="relative z-10 w-full max-w-md h-full max-h-[90vh] sm:max-h-[850px] p-4 flex flex-col items-center justify-center">

      <!-- Card Itself -->
      <div id="view-card"
        class="w-full h-full relative shadow-[0_35px_60px_-15px_rgba(0,0,0,0.5)] rounded-sm overflow-hidden animate-card-up flex flex-col bg-white border-[6px] sm:border-[10px] border-white aspect-auto">

        <!-- Card Image (Larger) -->
        <div class="h-[60%] sm:h-[65%] w-full relative overflow-hidden bg-gray-200 group">
          <img id="view-image" src="" class="w-full h-full object-cover transition duration-1000 group-hover:scale-105"
            alt="Card Image">
          <div class="absolute inset-0 bg-gradient-to-t from-black/60 via-transparent to-transparent"></div>
        </div>

        <!-- Card Content -->
        <div
          class="h-[40%] sm:h-[35%] p-4 sm:p-6 flex flex-col items-center justify-center text-center bg-white text-gray-900 relative">
          <!-- Decorative elements -->
          <div class="absolute top-3 left-1/2 transform -translate-x-1/2 w-6 h-0.5 bg-gray-200"></div>

          <h1 id="view-title" class="font-serif text-xl sm:text-3xl text-gray-900 mb-2 line-clamp-2">Tiêu
            đề
          </h1>
          <div class="flex-1 flex items-start justify-center w-full overflow-y-auto pt-6">
            <p id="view-message" class="text-gray-600 text-xl sm:text-2xl leading-relaxed font-sans px-2">Nội dung lời
              chúc</p>
          </div>

          <div class="mt-auto w-10 h-0.5 bg-gray-200"></div>
        </div>
      </div>

      <!-- Minimal Action Bar (Bottom Overlay) -->
      <div
        class="absolute -bottom-16 opacity-0 hover:opacity-100 transition-opacity duration-300 group-hover:opacity-100 flex gap-4">
        <!-- Replaced by separate fixed container if needed, but staying relative for now -->
      </div>
    </div>

    <!-- Fixed Actions & Footer -->
    <div
      class="fixed bottom-0 left-0 w-full z-[60] flex flex-col items-center justify-end pb-4 pt-20 bg-gradient-to-t from-[#1F1B24] via-[#1F1B24]/80 to-transparent pointer-events-none">

      <!-- Action Buttons -->
      <div class="flex gap-4 mb-6 pointer-events-auto">
        <!-- Share Button (Primary) -->
        <button id="btn-share"
          class="w-12 h-12 rounded-full bg-gradient-to-r from-primary to-rose-500 text-white flex items-center justify-center hover:shadow-[0_0_20px_rgba(244,114,182,0.5)] transition shadow-lg group"
          title="Chia sẻ">
          <i class="fas fa-share-alt text-lg group-hover:scale-110 transition"></i>
        </button>

        <!-- Snapshot Button -->
        <button id="btn-snapshot"
          class="w-12 h-12 rounded-full bg-white/10 backdrop-blur-md border border-white/20 text-white flex items-center justify-center hover:bg-white hover:text-gray-900 transition shadow-lg group"
          title="Lưu ảnh">
          <i class="fas fa-camera text-lg group-hover:scale-110 transition"></i>
        </button>

        <!-- Create Button (Secondary with Confirm) -->
        <button id="btn-create"
          class="w-12 h-12 rounded-full bg-white/10 backdrop-blur-md border border-white/20 text-white flex items-center justify-center hover:bg-white hover:text-gray-900 transition shadow-lg group"
          title="Tạo mới">
          <i class="fas fa-plus text-lg group-hover:rotate-90 transition"></i>
        </button>
      </div>

      <!-- Minimal Footer -->
      <div class="text-center pointer-events-auto opacity-50 hover:opacity-100 transition duration-300">
        <p class="text-[10px] uppercase tracking-widest text-gray-400 mb-2">Made with <span
            class="text-rose-500 animate-pulse">❤</span> by ThiepOnline</p>
      </div>
    </div>

  </div>

  <!-- Float Music Toggle -->
  <button id="music-toggle"
    class="absolute top-4 right-4 sm:top-6 sm:right-6 w-10 h-10 sm:w-12 sm:h-12 bg-black/30 backdrop-blur-md rounded-full text-white flex items-center justify-center hover:bg-black/50 transition border border-white/10 z-50">
    <i class="fas fa-volume-up text-sm sm:text-base"></i>
  </button>

  </div>

  <!-- Social Share Modal -->
  <div id="share-modal"
    class="fixed inset-0 bg-black/90 backdrop-blur-md z-[100] hidden flex items-center justify-center p-4">
    <div
      class="bg-[#2D2833] border border-white/10 rounded-2xl p-6 sm:p-8 w-full max-w-sm text-center shadow-2xl transform scale-100 transition">
      <h3 class="text-xl font-bold text-white mb-6 font-serif">Chia sẻ yêu thương</h3>
      <div class="grid grid-cols-3 gap-6 mb-8">
        <a href="#" id="share-fb" target="_blank" class="flex flex-col items-center gap-2 group">
          <div
            class="w-12 h-12 sm:w-14 sm:h-14 bg-[#3B5998] rounded-full flex items-center justify-center text-xl sm:text-2xl text-white shadow-lg group-hover:scale-110 transition">
            <i class="fab fa-facebook-messenger"></i>
          </div>
          <span class="text-xs text-gray-400 group-hover:text-white transition">Messenger</span>
        </a>
        <a href="#" id="share-zalo" target="_blank" class="flex flex-col items-center gap-2 group">
          <div
            class="w-12 h-12 sm:w-14 sm:h-14 bg-[#0068FF] rounded-full flex items-center justify-center text-xl sm:text-2xl font-bold text-white shadow-lg group-hover:scale-110 transition">
            Z</div>
          <span class="text-xs text-gray-400 group-hover:text-white transition">Gửi Zalo</span>
        </a>
        <button id="share-copy" class="flex flex-col items-center gap-2 group">
          <div
            class="w-12 h-12 sm:w-14 sm:h-14 bg-gray-700 rounded-full flex items-center justify-center text-xl sm:text-2xl text-white shadow-lg group-hover:scale-110 transition">
            <i class="fas fa-link"></i>
          </div>
          <span class="text-xs text-gray-400 group-hover:text-white transition">Copy Link</span>
        </button>
      </div>
      <button onclick="document.getElementById('share-modal').classList.add('hidden')"
        class="w-full py-3 bg-white/5 border border-white/10 rounded-lg font-bold text-gray-400 hover:text-white hover:bg-white/10 transition">Đóng</button>
    </div>
  </div>

  <audio id="bg-music" loop></audio>

  <!-- Custom Alert/Confirm Modal -->
  <div id="custom-dialog" class="fixed inset-0 z-[100] hidden items-center justify-center">
    <!-- Backdrop -->
    <div class="absolute inset-0 bg-black/60 backdrop-blur-sm transition-opacity opacity-0 duration-300"
      id="dialog-backdrop"></div>

    <!-- Modal Content -->
    <div
      class="relative bg-[#2D2833] border border-white/10 rounded-2xl shadow-2xl p-6 sm:p-8 max-w-sm w-full mx-4 transform scale-95 opacity-0 transition-all duration-300 z-10"
      id="dialog-panel">
      <div class="text-center">
        <!-- Icon -->
        <div id="dialog-icon-container"
          class="mx-auto flex items-center justify-center h-16 w-16 rounded-full bg-primary/10 mb-6 ring-1 ring-primary/30">
          <i id="dialog-icon" class="fas fa-info text-2xl text-primary"></i>
        </div>

        <h3 class="text-xl font-bold text-white mb-3 tracking-tight" id="dialog-title">Thông báo</h3>
        <p class="text-gray-400 mb-8 leading-relaxed font-light" id="dialog-message">Nội dung thông báo...</p>

        <div class="flex flex-col sm:flex-row gap-3 justify-center" id="dialog-actions">
          <!-- Buttons injected via JS -->
        </div>
      </div>
    </div>
  </div>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
  <script src="js/data.js"></script>
  <script src="js/app.js"></script>
</body>

</html>